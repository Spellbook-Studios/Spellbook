/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package dk.sebsa.spellbook;

import dk.sebsa.Spellbook;
import dk.sebsa.SpellbookCapabilities;
import dk.sebsa.spellbook.core.Application;
import dk.sebsa.spellbook.core.events.EngineInitEvent;
import dk.sebsa.spellbook.core.events.EngineLoadEvent;
import dk.sebsa.spellbook.core.events.LayerStack;
import dk.sebsa.spellbook.opengl.RenderPipeline;
import dk.sebsa.spellbook.opengl.TestStage;
import dk.sebsa.spellbook.opengl.stages.SpriteStage;
import dk.sebsa.spellbook.opengl.stages.UIStage;

public class Sandbox extends Application {
    public DebugLayer debugLayer;

    public static void main(String[] args) {
        Spellbook.start(new Sandbox(), SpellbookCapabilities.builder()
                        .spellbookDebug(true)
                        .logStoreTarget("../logs/latest.log")
                        .logDisableASCIIEscapeCharacters(false)
                        .debugIMGUI(true)
                        .build());
    }

    @Override
    public String name() {
        return "Sandbox";
    }

    @Override
    public String author() {
        return "Sebsa";
    }

    @Override
    public String version() {
        return "1.0a";
    }

    @Override
    public RenderPipeline renderingPipeline(EngineLoadEvent e) {
        return new RenderPipeline.RenderPipelineBuilder()
                .appendStage(new SpriteStage(e.moduleCore.getWindow()))
                .appendStage(new UIStage(e.moduleCore.getWindow(), e.moduleCore.getStack()))
                .build(e.logger);
    }

    @Override
    public LayerStack layerStack(EngineInitEvent e) {
        debugLayer = new DebugLayer(e.logger);

        return new LayerStack.LayerStackBuilder()
                .appendLayer(new TestLayer(e.logger, debugLayer))
                .appendLayer(debugLayer)
                .build();
    }
}
